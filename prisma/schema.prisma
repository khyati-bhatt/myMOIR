generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum MediaType {
  IMAGE
  VIDEO
  LIVE_PHOTO
}

enum Mood {
  CALM
  NOSTALGIC
  MELANCHOLIC
  INSPIRED
  CHAOTIC
  GRATEFUL
}

model User {
  id           String   @id @default(uuid())
  email        String   @unique
  passwordHash String
  role         String   @default("USER")
  createdAt    DateTime @default(now())

  memories     Memory[]
}

model Memory {
  id            String    @id @default(uuid())
  userId        String
  user          User      @relation(fields: [userId], references: [id])

  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  deletedAt     DateTime?

  title         String?
  caption       String
  mediaType     MediaType
  mediaKey      String
  thumbnailKey  String
  audioKey      String?

  mood          Mood
  intensity     Int
  reflectionNote String?

  locationName  String?
  latitude      Float?
  longitude     Float?
  takenAt       DateTime

  isFavorite    Boolean   @default(false)
  isArchived    Boolean   @default(false)
}
